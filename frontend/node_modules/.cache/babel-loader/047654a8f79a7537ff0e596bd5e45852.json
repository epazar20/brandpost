{"ast":null,"code":"var _jsxFileName = \"/Users/epazar/Documents/workspace/UI/frontend/src/pages/UserSignUp.tsx\";\nimport React from \"react\";\nimport Input from '../component/Input';\nimport { withTranslation } from \"react-i18next\";\nimport ButtonWithLoading from \"../component/ButtonWithLoading\";\nimport { withApiProgress } from \"../common/ApiProgress\";\nimport { connect } from \"react-redux\";\nimport { signUpHandler } from \"../redux/authAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass UserSignUpPage extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      username: null,\n      displayname: null,\n      password: null,\n      passwordrepeat: null,\n      errors: {}\n    };\n\n    this.onChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      const errors = { ...this.state.errors\n      };\n      const {\n        t\n      } = this.props;\n      errors[name] = undefined;\n\n      if (name === 'password' || name === 'passwordrepeat') {\n        if (name === 'password' && value !== this.state.passwordrepeat) {\n          errors.passwordrepeat = t(\"Password mismatch\");\n        } else if (name === 'passwordrepeat' && value !== this.state.password) {\n          errors.passwordrepeat = t(\"Password mismatch\");\n        } else {\n          errors.passwordrepeat = undefined;\n        }\n      }\n\n      this.setState({\n        [name]: value,\n        errors\n      });\n    };\n\n    this.onClick = async event => {\n      const {\n        username,\n        displayname,\n        password\n      } = this.state;\n      const {\n        dispatch,\n        history\n      } = this.props;\n      const data = {\n        username,\n        displayname,\n        password\n      };\n      event.preventDefault();\n\n      try {\n        const response = dispatch(await signUpHandler(data));\n        history.push(\"/\");\n      } catch (error) {\n        console.log(error.response.data);\n\n        if (error.response.data.validationerrors) {\n          this.setState({\n            errors: error.response.data.validationerrors\n          });\n        }\n      }\n      /* axios.post(\"/api/1.0/users\", data).then(response => {\n          this.setState({pendingApiCall:false});\n      }).catch(error => {\n          this.setState({pendingApiCall:false});\n      }); */\n\n    };\n  }\n\n  render() {\n    const {\n      t,\n      pendingApiCall\n    } = this.props;\n    const {\n      errors\n    } = this.state;\n    const {\n      username,\n      displayname,\n      password,\n      passwordrepeat\n    } = errors;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: t(\"Sign Up\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          name: \"username\",\n          error: username,\n          label: t(\"Username\"),\n          onChange: this.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"displayname\",\n          error: displayname,\n          label: t(\"Display Name\"),\n          onChange: this.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"password\",\n          error: password,\n          label: t(\"Password\"),\n          onChange: this.onChange,\n          type: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"passwordrepeat\",\n          error: passwordrepeat,\n          label: t(\"Password Repeat\"),\n          onChange: this.onChange,\n          type: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ButtonWithLoading, {\n          onClick: this.onClick,\n          disabled: pendingApiCall || passwordrepeat,\n          text: t(\"Sign Up\"),\n          pendingApiCall: pendingApiCall\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = store => {\n  return { ...store\n  };\n};\n\nexport default connect(mapStateToProps)(withApiProgress(withTranslation()(UserSignUpPage), \"/api/1.0/users\"));","map":{"version":3,"names":["React","Input","withTranslation","ButtonWithLoading","withApiProgress","connect","signUpHandler","UserSignUpPage","Component","state","username","displayname","password","passwordrepeat","errors","onChange","event","name","value","target","t","props","undefined","setState","onClick","dispatch","history","data","preventDefault","response","push","error","console","log","validationerrors","render","pendingApiCall","mapStateToProps","store"],"sources":["/Users/epazar/Documents/workspace/UI/frontend/src/pages/UserSignUp.tsx"],"sourcesContent":["import React from \"react\";\nimport Input from '../component/Input';\nimport { signUp } from \"../api/ApiCalls\";\nimport { withTranslation } from \"react-i18next\";\nimport ButtonWithLoading from \"../component/ButtonWithLoading\";\nimport { withApiProgress } from \"../common/ApiProgress\";\nimport { connect } from \"react-redux\";\nimport { signUpHandler } from \"../redux/authAction\";\n\nclass UserSignUpPage extends React.Component<any,any> {\n\n    state = {\n        username: null,\n        displayname: null,\n        password: null,\n        passwordrepeat: null,\n        errors: {}\n    }\n\n\n    onChange = (event :any) => {\n        const { name, value } = event.target;\n        const errors :any= { ...this.state.errors }\n        const { t } = this.props as any;\n        errors[name] = undefined;\n        if (name === 'password' || name === 'passwordrepeat') {\n            if (name === 'password' && value !== this.state.passwordrepeat) {\n                errors.passwordrepeat = t(\"Password mismatch\");\n            }\n            else if (name === 'passwordrepeat' && value !== this.state.password) {\n                errors.passwordrepeat = t(\"Password mismatch\");\n            }\n            else {\n                errors.passwordrepeat = undefined;\n            }\n\n        }\n        this.setState({ [name]: value, errors });\n    }\n\n    onClick = async (event :any) => {\n        const { username, displayname, password } = this.state;\n        const {dispatch,history} = this.props;\n        const data = {\n            username,\n            displayname,\n            password\n        }\n\n        event.preventDefault();\n        try {\n            const response = dispatch(await signUpHandler(data));\n            history.push(\"/\");\n        } catch (error:any) {\n            console.log(error.response.data);\n\n            if (error.response.data.validationerrors) { this.setState({ errors: error.response.data.validationerrors }); }\n        }\n\n        /* axios.post(\"/api/1.0/users\", data).then(response => {\n            this.setState({pendingApiCall:false});\n        }).catch(error => {\n            this.setState({pendingApiCall:false});\n        }); */\n\n    }\n\n    \n\n    render() {\n        const { t ,pendingApiCall} = this.props as any;\n        const { errors } = this.state;\n        const { username, displayname, password, passwordrepeat } = errors as any;\n        return (\n            <div className=\"container\">\n                <h1 className=\"text-center\">{t(\"Sign Up\")}</h1>\n                <form>\n                    <Input name={\"username\"} error={username} label={t(\"Username\")} onChange={this.onChange} />\n                    <Input name={\"displayname\"} error={displayname} label={t(\"Display Name\")} onChange={this.onChange} />\n                    <Input name={\"password\"} error={password} label={t(\"Password\")} onChange={this.onChange} type={\"password\"} />\n                    <Input name={\"passwordrepeat\"} error={passwordrepeat} label={t(\"Password Repeat\")} onChange={this.onChange} type={\"password\"} />\n                    <ButtonWithLoading onClick={this.onClick} disabled={pendingApiCall || passwordrepeat} text={t(\"Sign Up\")} pendingApiCall={pendingApiCall}/>                  \n                </form>\n            </div>\n        )\n    }\n\n}\n\nconst mapStateToProps = (store:any) =>\n{\n    return {\n        ...store\n    }\n}\n\nexport default connect(mapStateToProps)(withApiProgress(withTranslation()(UserSignUpPage),\"/api/1.0/users\"));"],"mappings":"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"},"metadata":{},"sourceType":"module"}