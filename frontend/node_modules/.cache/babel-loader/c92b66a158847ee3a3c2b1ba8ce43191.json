{"ast":null,"code":"var _jsxFileName = \"/Users/epazar/Documents/workspace/UI/frontend/src/pages/UserSignUp.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport Input from '../component/Input';\nimport { useTranslation } from \"react-i18next\";\nimport ButtonWithLoading from \"../component/ButtonWithLoading\";\nimport { withApiProgress } from \"../common/ApiProgress\";\nimport { useDispatch } from \"react-redux\";\nimport { signUpHandlerAction } from \"../redux/authAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserSignUpPage = props => {\n  _s();\n\n  const [userData, setUserData] = useState({\n    username: null,\n    displayname: null,\n    password: null,\n    passwordrepeat: null\n  });\n  const [errors, setErrors] = useState({});\n  const {\n    pendingApiCall\n  } = props;\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n\n  const onChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    const errorsCopy = { ...errors,\n      [name]: undefined\n    };\n    setErrors(errorsCopy);\n    setUserData(previous => {\n      return { ...previous,\n        [name]: value\n      };\n    });\n  };\n\n  const onClick = async event => {\n    event.preventDefault();\n    const {\n      username,\n      displayname,\n      password\n    } = userData;\n    const {\n      history\n    } = props;\n    const data = {\n      username,\n      displayname,\n      password\n    };\n\n    try {\n      const response = await dispatch(signUpHandlerAction(data));\n      history.push(\"/\");\n    } catch (error) {\n      console.log(error.response.data);\n\n      if (error.response.data.validationerrors) {\n        setErrors(error.response.data.validationerrors);\n      }\n    }\n  };\n\n  let paswordMismatch = undefined;\n\n  if (userData.password !== userData.passwordrepeat) {\n    paswordMismatch = t(\"Password mismatch\");\n  }\n\n  const {\n    username,\n    displayname,\n    password\n  } = errors;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center\",\n      children: t(\"Sign Up\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        name: \"username\",\n        error: username,\n        label: t(\"Username\"),\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        name: \"displayname\",\n        error: displayname,\n        label: t(\"Display Name\"),\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        name: \"password\",\n        error: password,\n        label: t(\"Password\"),\n        onChange: onChange,\n        type: \"password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        name: \"passwordrepeat\",\n        error: paswordMismatch,\n        label: t(\"Password Repeat\"),\n        onChange: onChange,\n        type: \"password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ButtonWithLoading, {\n        onClick: onClick,\n        disabled: pendingApiCall || paswordMismatch,\n        text: t(\"Sign Up\"),\n        pendingApiCall: pendingApiCall\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UserSignUpPage, \"2dbqFKU9q1zDueHX5bppPtPGJYU=\", false, function () {\n  return [useTranslation, useDispatch];\n});\n\n_c = UserSignUpPage;\nexport default _c2 = withApiProgress(UserSignUpPage, \"/api/1.0/users\");\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UserSignUpPage\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["useState","Input","useTranslation","ButtonWithLoading","withApiProgress","useDispatch","signUpHandlerAction","UserSignUpPage","props","userData","setUserData","username","displayname","password","passwordrepeat","errors","setErrors","pendingApiCall","t","dispatch","onChange","event","name","value","target","errorsCopy","undefined","previous","onClick","preventDefault","history","data","response","push","error","console","log","validationerrors","paswordMismatch"],"sources":["/Users/epazar/Documents/workspace/UI/frontend/src/pages/UserSignUp.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport Input from '../component/Input';\nimport { useTranslation } from \"react-i18next\";\nimport ButtonWithLoading from \"../component/ButtonWithLoading\";\nimport { withApiProgress } from \"../common/ApiProgress\";\nimport { useDispatch } from \"react-redux\";\nimport { signUpHandlerAction } from \"../redux/authAction\";\n\nconst UserSignUpPage = (props: any) => {\n\n    const [userData, setUserData] = useState({\n        username: null,\n        displayname: null,\n        password: null,\n        passwordrepeat: null\n    });\n\n    const [errors, setErrors] = useState({});\n    const { pendingApiCall } = props as any;\n    const {t} = useTranslation();\n    const dispatch = useDispatch();\n\n    const onChange = (event: any) => {\n        const { name, value } = event.target;\n        const errorsCopy: any = { ...errors, [name]: undefined }\n        setErrors(errorsCopy);\n        setUserData((previous:any)=>{\n            return{\n                ...previous,\n                [name]:value\n            }\n        })\n    }\n\n    const onClick = async (event: any) => {\n        event.preventDefault();\n        const { username, displayname, password } = userData;\n        const { history } = props;\n        const data = {\n            username,\n            displayname,\n            password\n        }\n\n        try {\n            const response = await dispatch(signUpHandlerAction(data) as any);\n            history.push(\"/\");\n        } catch (error: any) {\n            console.log(error.response.data);\n            if (error.response.data.validationerrors) { setErrors(error.response.data.validationerrors); }\n        }\n\n    }\n    \n    let paswordMismatch = undefined;\n    if (userData.password !== userData.passwordrepeat) { paswordMismatch = t(\"Password mismatch\") }\n    const { username, displayname, password } = errors as any;\n    return (\n        <div className=\"container\">\n            <h1 className=\"text-center\">{t(\"Sign Up\")}</h1>\n            <form>\n                <Input name={\"username\"} error={username} label={t(\"Username\")} onChange={onChange} />\n                <Input name={\"displayname\"} error={displayname} label={t(\"Display Name\")} onChange={onChange} />\n                <Input name={\"password\"} error={password} label={t(\"Password\")} onChange={onChange} type={\"password\"} />\n                <Input name={\"passwordrepeat\"} error={paswordMismatch} label={t(\"Password Repeat\")} onChange={onChange} type={\"password\"} />\n                <ButtonWithLoading onClick={onClick} disabled={pendingApiCall || paswordMismatch} text={t(\"Sign Up\")} pendingApiCall={pendingApiCall} />\n            </form>\n        </div>\n    )\n}\n\n\nexport default withApiProgress(UserSignUpPage, \"/api/1.0/users\");"],"mappings":"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"},"metadata":{},"sourceType":"module"}