{"ast":null,"code":"import { applyMiddleware, compose, createStore } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { setAuth } from \"../api/ApiCalls\";\nimport { authReducer, defaultState } from \"./authReducer\";\nconst initialState = {\n  isLoggedIn: true,\n  username: \"user\",\n  password: undefined,\n  displayname: undefined,\n  image: undefined\n};\nexport const configureStore = () => {\n  let current = defaultState;\n  const local = localStorage.getItem(\"auth\");\n\n  if (local) {\n    try {\n      current = JSON.parse(local);\n    } catch (error) {}\n  }\n\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const store = createStore(authReducer, current, composeEnhancers(applyMiddleware(thunk)));\n  store.subscribe(() => {\n    localStorage.setItem(\"auth\", JSON.stringify(store.getState()));\n    setAuth(store.getState());\n  });\n  return store;\n};","map":{"version":3,"names":["applyMiddleware","compose","createStore","thunk","setAuth","authReducer","defaultState","initialState","isLoggedIn","username","password","undefined","displayname","image","configureStore","current","local","localStorage","getItem","JSON","parse","error","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","subscribe","setItem","stringify","getState"],"sources":["/Users/epazar/Documents/workspace/UI/frontend/src/redux/configureStore.tsx"],"sourcesContent":["import { applyMiddleware, compose, createStore } from \"redux\"\nimport thunk from \"redux-thunk\";\nimport { setAuth } from \"../api/ApiCalls\";\nimport { authReducer, defaultState } from \"./authReducer\"\n\n\nconst initialState: any = {\n  isLoggedIn: true,\n  username: \"user\",\n  password: undefined,\n  displayname: undefined,\n  image: undefined\n}\n\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n  }\n}\n\nexport const configureStore = () => {\n  let current = defaultState;\n  const local = localStorage.getItem(\"auth\");\n  if (local) {\n    try {\n      current = JSON.parse(local);\n    } catch (error) {\n\n    }\n  }\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const store = createStore(authReducer, current, composeEnhancers(applyMiddleware(thunk)));\n  store.subscribe(() => {\n    localStorage.setItem(\"auth\", JSON.stringify(store.getState()));\n    setAuth(store.getState());\n\n  })\n\n  return store;\n}"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,OAA1B,EAAmCC,WAAnC,QAAsD,OAAtD;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,SAASC,WAAT,EAAsBC,YAAtB,QAA0C,eAA1C;AAGA,MAAMC,YAAiB,GAAG;EACxBC,UAAU,EAAE,IADY;EAExBC,QAAQ,EAAE,MAFc;EAGxBC,QAAQ,EAAEC,SAHc;EAIxBC,WAAW,EAAED,SAJW;EAKxBE,KAAK,EAAEF;AALiB,CAA1B;AAcA,OAAO,MAAMG,cAAc,GAAG,MAAM;EAClC,IAAIC,OAAO,GAAGT,YAAd;EACA,MAAMU,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAd;;EACA,IAAIF,KAAJ,EAAW;IACT,IAAI;MACFD,OAAO,GAAGI,IAAI,CAACC,KAAL,CAAWJ,KAAX,CAAV;IACD,CAFD,CAEE,OAAOK,KAAP,EAAc,CAEf;EACF;;EACD,MAAMC,gBAAgB,GAAGC,MAAM,CAACC,oCAAP,IAA+CvB,OAAxE;EACA,MAAMwB,KAAK,GAAGvB,WAAW,CAACG,WAAD,EAAcU,OAAd,EAAuBO,gBAAgB,CAACtB,eAAe,CAACG,KAAD,CAAhB,CAAvC,CAAzB;EACAsB,KAAK,CAACC,SAAN,CAAgB,MAAM;IACpBT,YAAY,CAACU,OAAb,CAAqB,MAArB,EAA6BR,IAAI,CAACS,SAAL,CAAeH,KAAK,CAACI,QAAN,EAAf,CAA7B;IACAzB,OAAO,CAACqB,KAAK,CAACI,QAAN,EAAD,CAAP;EAED,CAJD;EAMA,OAAOJ,KAAP;AACD,CAnBM"},"metadata":{},"sourceType":"module"}