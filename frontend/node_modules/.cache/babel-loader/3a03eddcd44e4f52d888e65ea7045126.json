{"ast":null,"code":"var _jsxFileName = \"/Users/epazar/Documents/workspace/UI/frontend/src/common/ApiProgress.tsx\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function withApiProgress(WrappedComponent, path) {\n  return class ApiProgress extends Component {\n    constructor() {\n      super(...arguments);\n      this.state = {\n        pendingApiCall: false,\n        reId: 0,\n        resId: 0\n      };\n\n      this.updateState = (url, durum) => {\n        if (path && url === path) {\n          this.setState({\n            pendingApiCall: durum\n          });\n        }\n      };\n    }\n\n    componentDidMount() {\n      this.state.reId = axios.interceptors.request.use(request => {\n        console.log(\"cnt: \" + path);\n        this.updateState(request.url, true);\n        return request;\n      });\n      this.state.resId = axios.interceptors.response.use(response => {\n        this.updateState(response.config.url, false);\n        return response;\n      }, er => {\n        this.updateState(er.config.url, false);\n        throw er;\n      });\n    }\n\n    componentWillUnmount() {\n      axios.interceptors.request.eject(this.state.reId);\n      axios.interceptors.response.eject(this.state.resId);\n    }\n\n    render() {\n      const {\n        pendingApiCall\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner-border text-primary\",\n          id: \"spinner\",\n          role: \"status\",\n          children: [/*#__PURE__*/_jsxDEV(WrappedComponent, {\n            pendingApiCall: pendingApiCall,\n            ...this.props\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sr-only\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this);\n    }\n\n  };\n}","map":{"version":3,"names":["axios","React","Component","withApiProgress","WrappedComponent","path","ApiProgress","state","pendingApiCall","reId","resId","updateState","url","durum","setState","componentDidMount","interceptors","request","use","console","log","response","config","er","componentWillUnmount","eject","render","props"],"sources":["/Users/epazar/Documents/workspace/UI/frontend/src/common/ApiProgress.tsx"],"sourcesContent":["import axios from 'axios';\nimport React, { Component } from 'react';\n\n\n\nexport function withApiProgress(WrappedComponent: any, path: string) {\n    return class ApiProgress extends Component<any, any> {\n\n\n        state = {\n            pendingApiCall: false,\n            reId: 0,\n            resId: 0\n        }\n\n        updateState = (url: string, durum: boolean) => {\n\n            if (path && url === path) {\n                this.setState({\n                    pendingApiCall: durum\n                });\n            }\n        }\n\n\n        componentDidMount() {\n\n            this.state.reId = axios.interceptors.request.use((request) => {\n                console.log(\"cnt: \" + path);\n                this.updateState(request.url!, true);\n                return request;\n            });\n\n            this.state.resId = axios.interceptors.response.use((response) => {\n                this.updateState(response.config.url!, false);\n                return response;\n            }, (er) => {\n                this.updateState(er.config.url!, false);\n                throw er;\n            })\n        }\n\n        componentWillUnmount() {\n            axios.interceptors.request.eject(this.state.reId);\n            axios.interceptors.response.eject(this.state.resId);\n        }\n\n\n        render() {\n\n            const { pendingApiCall } = this.state as any;\n            return (\n                <div>\n                    {/* {React.cloneElement(this.props.children, { pendingApiCall: this.state.pendingApiCall })} */}\n                    <div className=\"spinner-border text-primary\"\n                        id=\"spinner\" role=\"status\">\n                        <WrappedComponent pendingApiCall={pendingApiCall} {...this.props} />\n                        <span className=\"sr-only\">Loading...</span>\n                    </div>\n                </div>\n            );\n        }\n    }\n}\n\n\n\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAIA,OAAO,SAASC,eAAT,CAAyBC,gBAAzB,EAAgDC,IAAhD,EAA8D;EACjE,OAAO,MAAMC,WAAN,SAA0BJ,SAA1B,CAA8C;IAAA;MAAA;MAAA,KAGjDK,KAHiD,GAGzC;QACJC,cAAc,EAAE,KADZ;QAEJC,IAAI,EAAE,CAFF;QAGJC,KAAK,EAAE;MAHH,CAHyC;;MAAA,KASjDC,WATiD,GASnC,CAACC,GAAD,EAAcC,KAAd,KAAiC;QAE3C,IAAIR,IAAI,IAAIO,GAAG,KAAKP,IAApB,EAA0B;UACtB,KAAKS,QAAL,CAAc;YACVN,cAAc,EAAEK;UADN,CAAd;QAGH;MACJ,CAhBgD;IAAA;;IAmBjDE,iBAAiB,GAAG;MAEhB,KAAKR,KAAL,CAAWE,IAAX,GAAkBT,KAAK,CAACgB,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAAgCD,OAAD,IAAa;QAC1DE,OAAO,CAACC,GAAR,CAAY,UAAUf,IAAtB;QACA,KAAKM,WAAL,CAAiBM,OAAO,CAACL,GAAzB,EAA+B,IAA/B;QACA,OAAOK,OAAP;MACH,CAJiB,CAAlB;MAMA,KAAKV,KAAL,CAAWG,KAAX,GAAmBV,KAAK,CAACgB,YAAN,CAAmBK,QAAnB,CAA4BH,GAA5B,CAAiCG,QAAD,IAAc;QAC7D,KAAKV,WAAL,CAAiBU,QAAQ,CAACC,MAAT,CAAgBV,GAAjC,EAAuC,KAAvC;QACA,OAAOS,QAAP;MACH,CAHkB,EAGfE,EAAD,IAAQ;QACP,KAAKZ,WAAL,CAAiBY,EAAE,CAACD,MAAH,CAAUV,GAA3B,EAAiC,KAAjC;QACA,MAAMW,EAAN;MACH,CANkB,CAAnB;IAOH;;IAEDC,oBAAoB,GAAG;MACnBxB,KAAK,CAACgB,YAAN,CAAmBC,OAAnB,CAA2BQ,KAA3B,CAAiC,KAAKlB,KAAL,CAAWE,IAA5C;MACAT,KAAK,CAACgB,YAAN,CAAmBK,QAAnB,CAA4BI,KAA5B,CAAkC,KAAKlB,KAAL,CAAWG,KAA7C;IACH;;IAGDgB,MAAM,GAAG;MAEL,MAAM;QAAElB;MAAF,IAAqB,KAAKD,KAAhC;MACA,oBACI;QAAA,uBAEI;UAAK,SAAS,EAAC,6BAAf;UACI,EAAE,EAAC,SADP;UACiB,IAAI,EAAC,QADtB;UAAA,wBAEI,QAAC,gBAAD;YAAkB,cAAc,EAAEC,cAAlC;YAAA,GAAsD,KAAKmB;UAA3D;YAAA;YAAA;YAAA;UAAA,QAFJ,eAGI;YAAM,SAAS,EAAC,SAAhB;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAHJ;QAAA;UAAA;UAAA;UAAA;QAAA;MAFJ;QAAA;QAAA;QAAA;MAAA,QADJ;IAUH;;EAvDgD,CAArD;AAyDH"},"metadata":{},"sourceType":"module"}